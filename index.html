<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ogbots Dashboard</title>
  <style>
    body { background-color: #1a1d29; color: white; font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .nav { display: flex; justify-content: space-around; flex-wrap: wrap; padding: 10px; border-bottom: 1px solid #fff; cursor: pointer; }
    .nav div:hover { background-color: #333; }
    .nav div.active { border-bottom: 3px solid #ffb800; font-weight: bold; }
    .section { display: none; text-align: center; padding: 50px; }
    .active { display: block; }
    .btn { background-color: #ffb800; color: black; padding: 10px 20px; border: none; cursor: pointer; margin: 10px; font-weight: bold; font-size: 16px; }
    .card { background: #2a2d3f; padding: 20px; margin: 10px auto; width: 90%; max-width: 400px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.3); text-align: left; }
    .footer { text-align: center; padding: 20px; font-size: 14px; color: #bbb; }
    a { color: #ffb800; text-decoration: none; }
    h2 { margin-top: 0; }
  </style>
</head>
<body>
  <div class="nav">
    <div id="nav-create" class="active" onclick="showSection('create')">Create Bot</div>
    <div id="nav-token" onclick="showSection('token')">Token</div>
    <div id="nav-connect" onclick="showSection('connect')">Host Bot</div>
    <div id="nav-dashboard" onclick="showSection('dashboard')">Dashboard</div>
  </div>

  <div id="create" class="section active">
    <h1>Welcome to Ogbots!</h1>
    <button class="btn" onclick="showSection('token')">Get Started</button>
  </div>

  <div id="token" class="section">
    <h1>Paste Your Token</h1>
    <input type="text" id="tokenField" placeholder="Paste your token here" />
    <button class="btn" onclick="copyToken()">Copy Token</button>
    <button class="btn" onclick="showSection('connect')">Next Step</button>
  </div>

  <div id="connect" class="section">
    <h1>Connect Your Bot</h1>
    <input type="text" id="connectToken" placeholder="Bot Token" />
    <button class="btn" onclick="connectBot()">Connect Bot</button>
    <div id="log"></div>
  </div>

  <div id="dashboard" class="section">
    <h1>Bot Command Dashboard</h1>
    <p>Select commands to enable on your bot:</p>

    <div class="card">
      <h2>Ping Command</h2>
      <p>Replies with "Pong!" when users type <code>!ping</code>.</p>
      <button class="btn" onclick="enableCommand('ping')">Enable</button>
    </div>

    <div class="card">
      <h2>Say Command</h2>
      <p>Repeats whatever message the user sends. Example: <code>!say Hello</code>.</p>
      <button class="btn" onclick="enableCommand('say')">Enable</button>
    </div>

    <div class="card">
      <h2>Uptime Command</h2>
      <p>Returns how long the bot has been running. Example: <code>!uptime</code>.</p>
      <button class="btn" onclick="enableCommand('uptime')">Enable</button>
    </div>

    <div class="card">
      <h2>Help Command</h2>
      <p>Lists available commands to the user.</p>
      <button class="btn" onclick="enableCommand('help')">Enable</button>
    </div>
  </div>

  <div class="footer">
    You're signed in as @ordinarygamerlyt <a href="#">Logout</a>
  </div>

  <script>
    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
      document.querySelectorAll('.nav div').forEach(nav => nav.classList.remove('active'));
      document.getElementById('nav-' + sectionId).classList.add('active');
    }

    function copyToken() {
      const tokenField = document.getElementById('tokenField');
      tokenField.select();
      document.execCommand('copy');
      alert('Token copied!');
    }

    async function connectBot() {
      const token = document.getElementById('connectToken').value.trim();
      const log = document.getElementById('log');

      if (!token) {
        log.textContent = '❌ Please enter your bot token.';
        log.style.color = 'red';
        return;
      }

      log.textContent = '⏳ Starting bot...';
      log.style.color = 'white';

      try {
        const res = await fetch('/start-bot', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ token })
        });
        const text = await res.text();
        log.style.color = res.ok ? 'lightgreen' : 'red';
        log.textContent = text;

        if (res.ok) {
          showSection('dashboard');
        }
      } catch (err) {
        log.textContent = '❌ Server error. Try again.';
        log.style.color = 'red';
      }
    }

    function enableCommand(cmd) {
      alert(`✅ '${cmd}' command enabled (simulated)`);
      // Here you could POST to /api/commands if you want to store it in DB
    }
  </script>
</body>
</html>
